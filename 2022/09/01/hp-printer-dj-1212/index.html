<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="HP Printer  DeskJet 1212"><meta name="keywords" content=""><meta name="author" content="Ray Qu"><meta name="copyright" content="Ray Qu"><title>HP Printer  DeskJet 1212 | My Notes</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 7.3.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Win10-USB"><span class="toc-number">1.</span> <span class="toc-text">Win10 + USB</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Win7-USB"><span class="toc-number">2.</span> <span class="toc-text">Win7 + USB</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux-USB"><span class="toc-number">3.</span> <span class="toc-text">Linux + USB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#X64-Ubuntu-18-04-IBM-X201%E7%AC%94%E8%AE%B0%E6%9C%AC"><span class="toc-number">3.1.</span> <span class="toc-text">X64 Ubuntu 18.04 (IBM X201笔记本)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6CUPS%E6%9C%8D%E5%8A%A1%E3%80%82%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3%E6%98%AF631"><span class="toc-number">3.1.1.</span> <span class="toc-text">系统自带CUPS服务。默认端口是631</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%BD%E7%AE%A1%E6%9C%89%E5%A4%9A%E4%B8%AAHP-DeskJet-1200-series%E7%9A%84Linux%E9%A9%B1%E5%8A%A8%EF%BC%8C%E4%BD%86%E6%98%AF%E6%88%91%E5%8F%AA%E5%BC%84%E6%88%90%E5%8A%9F%E4%BA%86HPLIP-3-22-6%E3%80%82"><span class="toc-number">3.1.2.</span> <span class="toc-text">尽管有多个HP DeskJet 1200 series的Linux驱动，但是我只弄成功了HPLIP 3.22.6。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Armbian-20-04-N1%E7%9B%92%E5%AD%90"><span class="toc-number">3.2.</span> <span class="toc-text">Armbian 20.04 (N1盒子)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#N1%E7%9B%92%E5%AD%90%E8%A3%85Armbian-%E5%8F%82%E8%80%83%E4%BB%A5%E4%B8%8B%E8%BF%99%E4%B8%AA%E9%93%BE%E6%8E%A5"><span class="toc-number">3.2.1.</span> <span class="toc-text">N1盒子装Armbian,参考以下这个链接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Armbian%E5%AE%89%E8%A3%85CUPS"><span class="toc-number">3.2.2.</span> <span class="toc-text">Armbian安装CUPS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Armbian%E4%B8%8B%E7%9A%84HPLIP%E9%A9%B1%E5%8A%A8"><span class="toc-number">3.2.3.</span> <span class="toc-text">Armbian下的HPLIP驱动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#N1%E4%B8%8A%E7%9A%84%E6%89%93%E5%8D%B0%E6%9C%BA"><span class="toc-number">3.2.4.</span> <span class="toc-text">N1上的打印机</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lubuntu-18-19-EEEPC901-x86-32"><span class="toc-number">3.3.</span> <span class="toc-text">Lubuntu 18.19 (EEEPC901 x86_32)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CUPS"><span class="toc-number">3.3.1.</span> <span class="toc-text">CUPS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HPLIP-3-22-6%E9%A9%B1%E5%8A%A8"><span class="toc-number">3.3.2.</span> <span class="toc-text">HPLIP_3.22.6驱动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8CUPS%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%89%93%E5%8D%B0%E6%9C%BA"><span class="toc-number">3.3.3.</span> <span class="toc-text">在CUPS中添加打印机</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8-USB"><span class="toc-number">3.4.</span> <span class="toc-text">路由器 + USB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E6%9C%BA%E8%BF%9E%E6%8E%A5CUPS%E6%89%93%E5%8D%B0%E6%9C%BA"><span class="toc-number">3.5.</span> <span class="toc-text">手机连接CUPS打印机</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Ray Qu</div><div class="author-info__description text-center">My Tech Notes and Other stuff</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">77</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">My Notes</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/bookmarks">Bookmarks</a><a class="site-page" href="/about.html">About</a><a class="site-page" href="/contact.html">Contact</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">HP Printer  DeskJet 1212</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-09-01</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>让HP DeskJet 1212打印机在Win10, Win7, Ubuntu 18.04, Armbian (N1 20.04)下工作。</p>
<h2 id="Win10-USB"><a href="#Win10-USB" class="headerlink" title="Win10 + USB"></a>Win10 + USB</h2><p>最简单，官方提供Win10驱动。只要访问123.hp.com下载安装HP Smart软件就可以。<br>这个型号的打印机用的是hp-deskjet-1200-series驱动。</p>
<h2 id="Win7-USB"><a href="#Win7-USB" class="headerlink" title="Win7 + USB"></a>Win7 + USB</h2><p>有官方驱动，在这个网页中有链接。<br><a href="https://www.freeprintersupport.com/hp-deskjet-1200-series-driver-download/">https://www.freeprintersupport.com/hp-deskjet-1200-series-driver-download/</a></p>
<p>除了Win7+,官方还支持Mac OS驱动。</p>
<h2 id="Linux-USB"><a href="#Linux-USB" class="headerlink" title="Linux + USB"></a>Linux + USB</h2><p>重点是Linux连接USB打印机并通过CUPS服务分享为网络打印机。<br>这样就可以将USB打印机变成网络打印机。除了支持电脑打印，还可以通过局域网，直接从手机和平板电脑上打印（安卓和苹果）。</p>
<p>基本步骤为</p>
<ol>
<li>安装CUPS服务。</li>
<li>安装HP Linux驱动。</li>
</ol>
<h3 id="X64-Ubuntu-18-04-IBM-X201笔记本"><a href="#X64-Ubuntu-18-04-IBM-X201笔记本" class="headerlink" title="X64 Ubuntu 18.04 (IBM X201笔记本)"></a>X64 Ubuntu 18.04 (IBM X201笔记本)</h3><h4 id="系统自带CUPS服务。默认端口是631"><a href="#系统自带CUPS服务。默认端口是631" class="headerlink" title="系统自带CUPS服务。默认端口是631"></a>系统自带CUPS服务。默认端口是631</h4><p>netstat -na|grep 631命令可以看是否已经启动。<br>sudo systemctl status cups命令可以看服务是否存在以及状态。</p>
<p>如果没有安装，可以用以下命令安装<br>sudo apt update<br>sudo apt install cups</p>
<p>访问CUPS的URL是<br><a href="http://127.0.0.1:631/">http://127.0.0.1:631/</a><br>注: 用chrome浏览器访问CUPS有问题。需要用Firefox浏览器。</p>
<p>注：如果在CUPS管理界面中遇到权限问题，是因为我的帐号没有加入lpadmin组的原因。<br>用命令<br>sudo usermod -a -G lpadmin <user><br>sudo usermod -a -G lp <user><br>加入lpadmin就可以了。</p>
<h4 id="尽管有多个HP-DeskJet-1200-series的Linux驱动，但是我只弄成功了HPLIP-3-22-6。"><a href="#尽管有多个HP-DeskJet-1200-series的Linux驱动，但是我只弄成功了HPLIP-3-22-6。" class="headerlink" title="尽管有多个HP DeskJet 1200 series的Linux驱动，但是我只弄成功了HPLIP 3.22.6。"></a>尽管有多个HP DeskJet 1200 series的Linux驱动，但是我只弄成功了<a href="https://sourceforge.net/projects/hplip/files/hplip/">HPLIP 3.22.6</a>。</h4><p>这个链接中提到的其他驱动我都没有成功。<a href="https://www.openprinting.org/printer/HP/HP-DeskJet_1200C">https://www.openprinting.org/printer/HP/HP-DeskJet_1200C</a></p>
<p>而且我必须用HPLIP带的hp-setup命令添加打印机才行，在CUPS的管理界面或者Linux系统设置中的打印机管理界面添加打印机，即使用了同样的设置和驱动，也无法成功驱动打印机。</p>
<p>安装方法是下载hplip-3.22.6.run,运行这个脚本自解压和安装。<br>过程中都按回车选择默认选项就行。</p>
<p>安装成功之后用hp-setup (带图形界面)或者hp-setup -i(字符界面)添加打印机。<br>添加的打印机会在CUPS中看到。</p>
<p>注:<br>共享URL:<a href="http://192.168.1.6:631/printers/DeskJet_1212">http://192.168.1.6:631/printers/DeskJet_1212</a><br>Description:	DeskJet_1212<br>Location:	Home_LAN<br>Driver:	HP Deskjet 1200 Series, hpcups 3.22.6 (color)<br>Connection:	hp:&#x2F;usb&#x2F;DeskJet_1200_series?serial&#x3D;CN26I422SB<br>Defaults:	job-sheets&#x3D;none, none media&#x3D;iso_a4_210x297mm sides&#x3D;one-sided</p>
<p>Administration-&gt;Set Default Options可以修改Output Mode(Black Only Grayscale)<br>这里修改黑白打印。</p>
<h3 id="Armbian-20-04-N1盒子"><a href="#Armbian-20-04-N1盒子" class="headerlink" title="Armbian 20.04 (N1盒子)"></a>Armbian 20.04 (N1盒子)</h3><p>最终目标是通过N1盒子把USB打印机HP DeskJet 1212变成网络打印机。</p>
<h4 id="N1盒子装Armbian-参考以下这个链接"><a href="#N1盒子装Armbian-参考以下这个链接" class="headerlink" title="N1盒子装Armbian,参考以下这个链接"></a>N1盒子装Armbian,参考以下这个链接</h4><blockquote>
<p><a href="/2021/10/08/N1/">斐讯N1</a></p>
</blockquote>
<h4 id="Armbian安装CUPS"><a href="#Armbian安装CUPS" class="headerlink" title="Armbian安装CUPS"></a>Armbian安装CUPS</h4><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade</span><br><span class="line">sudo apt install cups</span><br></pre></td></tr></table></figure>

<p>检查用户是否在lp和lpadmin组里</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groups</span><br></pre></td></tr></table></figure>

<p>如果用户不在组里，把用户加进去</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G lpadmin &lt;user&gt;</span><br><span class="line">sudo usermod -a -G lp &lt;user&gt;</span><br></pre></td></tr></table></figure>

<p>注: 由于我的系统长时间未更新，以及所用的镜像<a href="http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/">http://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/</a> 取消了http必须使用https，所以在suto apt update的时候失败。也无法更新certificate.</p>
<p>于是先禁用https验证</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch /etc/apt/apt.conf.d/99verify-peer.conf \</span><br><span class="line">&amp;&amp; echo &gt;&gt;/etc/apt/apt.conf.d/99verify-peer.conf &quot;Acquire &#123; https::Verify-Peer false &#125;&quot;</span><br></pre></td></tr></table></figure>

<p>然后更新certificate</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install ca-certificates</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://askubuntu.com/questions/1095266/apt-get-update-failed-because-certificate-verification-failed-because-handshake">apt-get update failed because certificate verification failed because handshake failed on nodesource</a></p>
</blockquote>
<p>更新证书之后就可以重新启用https验证了。方法是删除&#x2F;etc&#x2F;apt&#x2F;apt.conf.d&#x2F;99verify-peer.conf 文件</p>
<p>然后正常update, upgrade, install</p>
<p>注: CUPS默认只在127.0.0.1上监听631端口。由于N1没有本地浏览器，所以需要修改&#x2F;etc&#x2F;cups&#x2F;cupsd.conf<br>原来是Listen 127.0.0.1:631<br>改为<br>Port 631<br>重启cups</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop cups</span><br><span class="line">sudo systemctl start cups</span><br></pre></td></tr></table></figure>

<p>然后就可以通过<a href="https://192.168.1.22:631/%E6%9D%A5%E8%AE%BF%E9%97%AEN1%E4%B8%8A%E7%9A%84CUPS%E4%BA%86%E3%80%82">https://192.168.1.22:631/来访问N1上的CUPS了。</a></p>
<h4 id="Armbian下的HPLIP驱动"><a href="#Armbian下的HPLIP驱动" class="headerlink" title="Armbian下的HPLIP驱动"></a>Armbian下的HPLIP驱动</h4><p>hplip有现成的软件包，但是安装之后都无法使用。在N1, x86 lubuntu, x86 Q4OS上都试过，几个不同版本的都不能用。表现为用lsusb命令已经可以看到系统发现了usb打印机设备，但是运行hp-setup -i命令，选择usb之后，出现如下提示。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error: No device selected/specified or that supports this functionality &quot;hp-setup&quot;</span><br></pre></td></tr></table></figure>

<p>只有自己编译出来的hplip 3.22.6 (截止2022.8.31时最新版)能用hp-setup -i添加打印机。</p>
<p>跟x86&#x2F;x64上不同，arm64下无法简单运行hplip-3.22.6.run成功编译驱动。因为驱动用到了prnt&#x2F;hpcups&#x2F;libImageProcessor-x86_32.so或libImageProcessor-x86_64.so文件。而这个文件没有arm64版本的。所以编译必须去掉对这个文件的依赖。</p>
<p>这个<a href="https://bugs.launchpad.net/hplip/+bug/1784989">链接</a>中提到libImageProcessor-x86_64.so是”CDS feature”. 3.18.6中没有对这个库的依赖，但是我尝试在Armbian上编译3.18.6,没有成功。python脚本多处报错。</p>
<p>以下是我用的方法。</p>
<p>I. 运行hplip-3.22.6.run，在自解压之后选择q退出。得到hplip-3.22.6目录</p>
<p>II. 进入hplip-3.22.6目录，运行install.py开始安装。在最后失败的时候，记录下最后几步的日志。</p>
<p>III. 重新运行.&#x2F;configure命令，添加–disable-imageProcessor-build参数</p>
<p>IV. 修改Makefile,删除所有跟ImageProcessor相关的内容，然后make clean, make, make install</p>
<blockquote>
<p><a href="https://git.slackware.nl/current/tree/source/ap/hplip/0025-Remove-all-ImageProcessor-functionality-which-is-clo.patch">移除代码对ImageProcessor依赖的patch</a></p>
</blockquote>
<p>我发现3.22.6代码中已经有设置可以通过参数去掉对ImageProcessor库的依赖，不需要手工删除。</p>
<blockquote>
<p><a href="https://www.cnblogs.com/wuyuxin/p/7001320.html">linux patch 格式与说明</a>,这个帮我读懂patch文件</p>
</blockquote>
<p>这个图是autoconf, automake各个文件的关系<br><img src="/myimages/autoconf_automake.png" alt="autoconf, automake各个文件的关系" title="autoconf"></p>
<blockquote>
<p><a href="https://www.cnblogs.com/lsgxeva/p/7592485.html">关于Makefile,Makefile.in,Makefile.am,Configure功能及相互关系的问题</a></p>
</blockquote>
<p>TODO 找到更好的编译方法。</p>
<h4 id="N1上的打印机"><a href="#N1上的打印机" class="headerlink" title="N1上的打印机"></a>N1上的打印机</h4><p>Description:	DeskJet_1212<br>Location:	N1_LAN<br>Driver:	HP Deskjet 1200 Series, hpcups 3.22.6 (color)<br>Connection:	hp:&#x2F;usb&#x2F;DeskJet_1200_series?serial&#x3D;CN26I422SB<br>Defaults:	job-sheets&#x3D;none, none media&#x3D;iso_a4_210x297mm sides&#x3D;one-sided</p>
<p><a href="https://192.168.1.22:631/printers/DeskJet_1212">https://192.168.1.22:631/printers/DeskJet_1212</a></p>
<h3 id="Lubuntu-18-19-EEEPC901-x86-32"><a href="#Lubuntu-18-19-EEEPC901-x86-32" class="headerlink" title="Lubuntu 18.19 (EEEPC901 x86_32)"></a>Lubuntu 18.19 (EEEPC901 x86_32)</h3><p>N1盒子的Armbian无法用WIFI,用EEEPC901的Lubuntu可以使用无线网卡，可以把打印机和EEEPC901放到任何地方。</p>
<h4 id="CUPS"><a href="#CUPS" class="headerlink" title="CUPS"></a>CUPS</h4><p>安装后修改配置文件&#x2F;etc&#x2F;cups&#x2F;cupsd.conf如下，以便可以从远程访问<br>访问的URL是<a href="https://192.168.1.15:631/">https://192.168.1.15:631/</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">LogLevel warn</span><br><span class="line">PageLogFormat</span><br><span class="line">MaxLogSize 0</span><br><span class="line"># Allow remote access</span><br><span class="line">Port 631</span><br><span class="line">Listen /run/cups/cups.sock</span><br><span class="line">Listen /var/run/cups/cups.sock</span><br><span class="line">Browsing On</span><br><span class="line">BrowseLocalProtocols dnssd</span><br><span class="line">DefaultAuthType Basic</span><br><span class="line">WebInterface Yes</span><br><span class="line">&lt;Location /&gt;</span><br><span class="line">  # Allow remote access...</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow all</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line">&lt;Location /admin&gt;</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line">&lt;Location /admin/conf&gt;</span><br><span class="line">  AuthType Default</span><br><span class="line">  Require user @SYSTEM</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line">&lt;Location /admin/log&gt;</span><br><span class="line">  AuthType Default</span><br><span class="line">  Require user @SYSTEM</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow @LOCAL</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow @LOCAL</span><br><span class="line">  Order allow,deny</span><br><span class="line">  Allow @LOCAL</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line">&lt;Policy default&gt;</span><br><span class="line">  JobPrivateAccess default</span><br><span class="line">  JobPrivateValues default</span><br><span class="line">  SubscriptionPrivateAccess default</span><br><span class="line">  SubscriptionPrivateValues default</span><br><span class="line">  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default CUPS-Get-Devices&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit All&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">&lt;/Policy&gt;</span><br><span class="line">&lt;Policy authenticated&gt;</span><br><span class="line">  JobPrivateAccess default</span><br><span class="line">  JobPrivateValues default</span><br><span class="line">  SubscriptionPrivateAccess default</span><br><span class="line">  SubscriptionPrivateValues default</span><br><span class="line">  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;</span><br><span class="line">    AuthType Default</span><br><span class="line">    Require user @OWNER @SYSTEM</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">  &lt;Limit All&gt;</span><br><span class="line">    Order deny,allow</span><br><span class="line">  &lt;/Limit&gt;</span><br><span class="line">&lt;/Policy&gt;</span><br><span class="line">JobPrivateAccess default</span><br><span class="line">JobPrivateValues default</span><br><span class="line">SubscriptionPrivateAccess default</span><br><span class="line">SubscriptionPrivateValues default</span><br></pre></td></tr></table></figure>

<p>修改之后重启cups服务</p>
<h4 id="HPLIP-3-22-6驱动"><a href="#HPLIP-3-22-6驱动" class="headerlink" title="HPLIP_3.22.6驱动"></a>HPLIP_3.22.6驱动</h4><p>驱动可以在x86_32的系统下正常编译，但是依赖包的安装过程会遇到问题，所以需要先手动安装依赖包。编译时选择定制安装，把所有的模块都选n。</p>
<p>I. 运行hplip-3.22.6.run然后选q退出，得到解压目录hplip-3.22.6</p>
<p>II. 运行以下命令安装依赖包</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo -H pip2 install opencv-python==4.2.0.32</span><br><span class="line">sudo -H pip2 install scikit-image==0.14.1 </span><br></pre></td></tr></table></figure>

<p>III. 运行install.py安装</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br></pre></td><td class="code"><pre><span class="line">user@eeepc-901:~/Downloads/hplip/hplip-3.22.6$ ./install.py</span><br><span class="line"></span><br><span class="line">HP Linux Imaging and Printing System (ver. 3.22.6)</span><br><span class="line">HPLIP Installer ver. 5.1</span><br><span class="line"></span><br><span class="line">Copyright (c) 2001-18 HP Development Company, LP</span><br><span class="line">This software comes with ABSOLUTELY NO WARRANTY.</span><br><span class="line">This is free software, and you are welcome to distribute it</span><br><span class="line">under certain conditions. See COPYING file for more details.</span><br><span class="line"></span><br><span class="line">Installer log saved in: hplip-install_Fri-02-Sep-2022_12:05:59.log</span><br><span class="line"></span><br><span class="line">-</span><br><span class="line">note: Defaults for each question are maked with a &#x27;*&#x27;. Press &lt;enter&gt; to accept the default.</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">INSTALLATION MODE</span><br><span class="line">-----------------</span><br><span class="line">Automatic mode will install the full HPLIP solution with the most common options.</span><br><span class="line">Custom mode allows you to choose installation options to fit specific requirements.</span><br><span class="line"></span><br><span class="line">Please choose the installation mode (a=automatic*, c=custom, q=quit) : c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INTRODUCTION</span><br><span class="line">------------</span><br><span class="line">This installer will install HPLIP version 3.22.6 on your computer.</span><br><span class="line">Please close any running package management systems now (YaST, Adept, Synaptic, Up2date, etc).</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DISTRO/OS CONFIRMATION</span><br><span class="line">----------------------</span><br><span class="line">Distro appears to be Ubuntu 18.10.</span><br><span class="line"></span><br><span class="line">Is &quot;Ubuntu 18.10&quot; your correct distro/OS and version (y=yes*, n=no, q=quit) ? </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DRIVER OPTIONS</span><br><span class="line">--------------</span><br><span class="line">Would you like to install Custom Discrete Drivers or Class Drivers ( &#x27;d&#x27;= Discrete Drivers*,&#x27;c&#x27;= Class Drivers,&#x27;q&#x27;= Quit)?   : </span><br><span class="line"></span><br><span class="line">Initializing. Please wait...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT HPLIP OPTIONS</span><br><span class="line">--------------------</span><br><span class="line">You can select which HPLIP options to enable. Some options require extra dependencies.</span><br><span class="line"></span><br><span class="line">Do you wish to enable &#x27;Network/JetDirect I/O&#x27; (y=yes*, n=no, q=quit) ? n</span><br><span class="line">Do you wish to enable &#x27;Graphical User Interfaces (Qt4)&#x27; (y=yes*, n=no, q=quit) ? n</span><br><span class="line">Do you wish to enable &#x27;PC Send Fax support&#x27; (y=yes*, n=no, q=quit) ? n</span><br><span class="line">Do you wish to enable &#x27;Scanning support&#x27; (y=yes*, n=no, q=quit) ? n</span><br><span class="line">Do you wish to enable &#x27;HPLIP documentation (HTML)&#x27; (y=yes*, n=no, q=quit) ? n</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ENTER USER PASSWORD</span><br><span class="line">-------------------</span><br><span class="line">Please enter the sudoer (quxr)&#x27;s password: </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">INSTALLATION NOTES</span><br><span class="line">------------------</span><br><span class="line">Enable the universe/multiverse repositories. Also be sure you are using the Ubuntu &quot;Main&quot; Repositories. See: https://help.ubuntu.com/community/Repositories/Ubuntu for more information.  Disable the CD-ROM/DVD source if you do not have the Ubuntu installation media inserted in the drive.</span><br><span class="line"></span><br><span class="line">Please read the installation notes. Press &lt;enter&gt; to continue or &#x27;q&#x27; to quit: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SECURITY PACKAGES</span><br><span class="line">-----------------</span><br><span class="line">AppArmor is installed. </span><br><span class="line">AppArmor protects the application from external intrusion attempts making the application secure</span><br><span class="line"></span><br><span class="line">Would you like to have this installer install the hplip specific policy/profile (y=yes*, n=no, q=quit) ? </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RUNNING PRE-INSTALL COMMANDS</span><br><span class="line">----------------------------</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RUNNING HPLIP LIBS REMOVE COMMANDS</span><br><span class="line">----------------------------------</span><br><span class="line">sudo apt-get remove libhpmud0 libsane-hpaio printer-driver-postscript-hp</span><br><span class="line">sudo apt-get remove libhpmud0 libsane-hpaio printer-driver-postscript-hp ( hp_libs_remove step 1)</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MISSING DEPENDENCIES</span><br><span class="line">--------------------</span><br><span class="line">Following dependencies are not installed. HPLIP will not work if all REQUIRED dependencies are not installed and some of the HPLIP features will not work if OPTIONAL dependencies are not installed.</span><br><span class="line">Package-Name         Component            Required/Optional   </span><br><span class="line">Do you want to install these missing dependencies (y=yes*, n=no, q=quit) ? </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSTALL MISSING REQUIRED DEPENDENCIES</span><br><span class="line">-------------------------------------</span><br><span class="line">note: Installation of dependencies requires an active internet connection.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RUNNING SCANJET DEPENDENCY COMMANDS</span><br><span class="line">-----------------------------------</span><br><span class="line">sudo apt-get install --assume-yes python-pip (Scanjet-depend step 1)</span><br><span class="line">sudo pip2 install --upgrade pip (Scanjet-depend step 2)</span><br><span class="line">sudo apt-get install --assume-yes libleptonica-dev (Scanjet-depend step 3)</span><br><span class="line">sudo apt-get install --assume-yes tesseract-ocr (Scanjet-depend step 4)</span><br><span class="line">sudo apt-get install --assume-yes libtesseract-dev (Scanjet-depend step 5)</span><br><span class="line">sudo -H pip2 install tesserocr (Scanjet-depend step 6)</span><br><span class="line">warning: Failed to install this Scanjet dependency package. Some Scanjet features will not work.</span><br><span class="line">sudo apt-get install --assume-yes tesseract-ocr-all (Scanjet-depend step 7)</span><br><span class="line">sudo apt-get install --assume-yes libzbar-dev (Scanjet-depend step 8)</span><br><span class="line">sudo apt-get install --assume-yes python-zbar (Scanjet-depend step 9)</span><br><span class="line">sudo -H pip2 install opencv-python (Scanjet-depend step 10)</span><br><span class="line">sudo -H pip2 install PyPDF2 (Scanjet-depend step 11)</span><br><span class="line">sudo -H pip2 install imutils (Scanjet-depend step 12)</span><br><span class="line">sudo -H pip2 install pypdfocr (Scanjet-depend step 13)</span><br><span class="line">sudo -H pip2 install scikit-image (Scanjet-depend step 14)</span><br><span class="line">sudo -H pip2 install scipy (Scanjet-depend step 15)</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">READY TO BUILD AND INSTALL</span><br><span class="line">--------------------------</span><br><span class="line">Ready to perform build and install. Press &lt;enter&gt; to continue or &#x27;q&#x27; to quit: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PRE-BUILD COMMANDS</span><br><span class="line">------------------</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BUILD AND INSTALL</span><br><span class="line">-----------------</span><br><span class="line">Running &#x27;./configure --with-hpppddir=/usr/share/ppd/HP --prefix=/usr --disable-qt4 --disable-qt5 --disable-doc-build --disable-cups-ppd-install --disable-foomatic-drv-install --disable-libusb01_build --disable-foomatic-ppd-install --disable-hpijs-install --disable-class-driver --disable-udev_sysfs_rules --disable-policykit --enable-cups-drv-install --enable-hpcups-install --disable-network-build --disable-dbus-build --disable-scan-build --disable-fax-build --enable-apparmor_build&#x27;</span><br><span class="line">Please wait, this may take several minutes...</span><br><span class="line">Command completed successfully.</span><br><span class="line"></span><br><span class="line">Running &#x27;make clean&#x27;</span><br><span class="line">Please wait, this may take several minutes...</span><br><span class="line">Command completed successfully.</span><br><span class="line"></span><br><span class="line">Running &#x27;make&#x27;</span><br><span class="line">Please wait, this may take several minutes...</span><br><span class="line">Command completed successfully.</span><br><span class="line"></span><br><span class="line">Running &#x27;sudo make install&#x27;</span><br><span class="line">Please wait, this may take several minutes...</span><br><span class="line">Command completed successfully.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Build complete.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">POST-BUILD COMMANDS</span><br><span class="line">-------------------</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">HPLIP UPDATE NOTIFICATION</span><br><span class="line">-------------------------</span><br><span class="line">Do you want to check for HPLIP updates?. (y=yes*, n=no) : </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RESTART OR RE-PLUG IS REQUIRED</span><br><span class="line">------------------------------</span><br><span class="line">If you are installing a USB connected printer, and the printer was plugged in when you started this installer, you will need to either      </span><br><span class="line">restart your PC or unplug and re-plug in your printer (USB cable only). If you choose to restart, run this command after restarting:        </span><br><span class="line">hp-setup (Note: If you are using a parallel connection, you will have to restart your PC. If you are using network/wireless, you can ignore </span><br><span class="line">and continue).                                                                                                                              </span><br><span class="line"></span><br><span class="line">Restart or re-plug in your printer (r=restart, p=re-plug in*, i=ignore/continue, q=quit) : </span><br><span class="line">Please unplug and re-plugin your printer now.  Press &lt;enter&gt; to continue or &#x27;q&#x27; to quit: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PRINTER SETUP</span><br><span class="line">-------------</span><br><span class="line">Would you like to setup a printer now (y=yes*, n=no, q=quit) ? </span><br><span class="line">Please make sure your printer is connected and powered on at this time.</span><br><span class="line">Do you want to setup printer in GUI mode? (u=GUI mode*, i=Interactive mode) : i</span><br><span class="line">Running &#x27;hp-setup  -i&#x27; command....</span><br><span class="line"></span><br><span class="line">HP Linux Imaging and Printing System (ver. 3.22.6)</span><br><span class="line">Printer/Fax Setup Utility ver. 9.0</span><br><span class="line"></span><br><span class="line">Copyright (c) 2001-18 HP Development Company, LP</span><br><span class="line">This software comes with ABSOLUTELY NO WARRANTY.</span><br><span class="line">This is free software, and you are welcome to distribute it</span><br><span class="line">under certain conditions. See COPYING file for more details.</span><br><span class="line"></span><br><span class="line">(Note: Defaults for each question are maked with a &#x27;*&#x27;. Press &lt;enter&gt; to accept the default.)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Using connection type: usb</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">Setting up device: hp:/usb/DeskJet_1200_series?serial=CN26I422SB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---------------------</span><br><span class="line">| PRINT QUEUE SETUP |</span><br><span class="line">---------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Please enter a name for this print queue (m=use model name:&#x27;DeskJet_1200&#x27;*, q=quit) ?DeskJet_1212</span><br><span class="line">Using queue name: DeskJet_1212</span><br><span class="line">Locating PPD file... Please wait.</span><br><span class="line"></span><br><span class="line">Found PPD file: drv:///hp/hpcups.drv/hp-deskjet_1200_series.ppd</span><br><span class="line">Description: </span><br><span class="line"></span><br><span class="line">Note: The model number may vary slightly from the actual model number on the device.</span><br><span class="line"></span><br><span class="line">Does this PPD file appear to be the correct one (y=yes*, n=no, q=quit) ? </span><br><span class="line">Enter a location description for this printer (q=quit) ?EEEPC901_LAN</span><br><span class="line">Enter additonal information or notes for this printer (q=quit) ?</span><br><span class="line"></span><br><span class="line">Adding print queue to CUPS:</span><br><span class="line">Device URI: hp:/usb/DeskJet_1200_series?serial=CN26I422SB</span><br><span class="line">Queue name: DeskJet_1212</span><br><span class="line">PPD file: drv:///hp/hpcups.drv/hp-deskjet_1200_series.ppd</span><br><span class="line">Location: EEEPC901_LAN</span><br><span class="line">Information: </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---------------------</span><br><span class="line">| PRINTER TEST PAGE |</span><br><span class="line">---------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Would you like to print a test page (y=yes*, n=no, q=quit) ? </span><br><span class="line"></span><br><span class="line">HP Linux Imaging and Printing System (ver. 3.22.6)</span><br><span class="line">Testpage Print Utility ver. 6.0</span><br><span class="line"></span><br><span class="line">Copyright (c) 2001-18 HP Development Company, LP</span><br><span class="line">This software comes with ABSOLUTELY NO WARRANTY.</span><br><span class="line">This is free software, and you are welcome to distribute it</span><br><span class="line">under certain conditions. See COPYING file for more details.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">HP Linux Imaging and Printing System (ver. 3.22.6)</span><br><span class="line">System Tray Status Service ver. 2.0</span><br><span class="line"></span><br><span class="line">Copyright (c) 2001-18 HP Development Company, LP</span><br><span class="line">This software comes with ABSOLUTELY NO WARRANTY.</span><br><span class="line">This is free software, and you are welcome to distribute it</span><br><span class="line">under certain conditions. See COPYING file for more details.</span><br><span class="line"></span><br><span class="line">warning: No display found.</span><br><span class="line">error: hp-systray requires Qt4 GUI and DBus support. Exiting.</span><br><span class="line">warning: Unable to connect to dbus. Is hp-systray running?</span><br><span class="line">Printing test page to printer DeskJet_1212...</span><br><span class="line">Test page has been sent to printer.</span><br><span class="line"></span><br><span class="line">note: If an error occured, or the test page failed to print, refer to the HPLIP website</span><br><span class="line">note: at: http://hplip.sourceforge.net for troubleshooting and support.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Done.</span><br><span class="line"></span><br><span class="line">Done.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RE-STARTING HP_SYSTRAY</span><br><span class="line">----------------------</span><br><span class="line"></span><br><span class="line">HP Linux Imaging and Printing System (ver. 3.22.6)</span><br><span class="line">System Tray Status Service ver. 2.0</span><br><span class="line"></span><br><span class="line">Copyright (c) 2001-18 HP Development Company, LP</span><br><span class="line">This software comes with ABSOLUTELY NO WARRANTY.</span><br><span class="line">This is free software, and you are welcome to distribute it</span><br><span class="line">under certain conditions. See COPYING file for more details.</span><br><span class="line"></span><br><span class="line">warning: No display found.</span><br><span class="line">error: hp-systray requires Qt4 GUI and DBus support. Exiting.</span><br><span class="line">user@eeepc-901:~/Downloads/hplip/hplip-3.22.6$</span><br></pre></td></tr></table></figure>

<h4 id="在CUPS中添加打印机"><a href="#在CUPS中添加打印机" class="headerlink" title="在CUPS中添加打印机"></a>在CUPS中添加打印机</h4><p>在CUPS中可以添加打印机，只要驱动选择HP Deskjet 1200 Series, hpcups 3.22.6 (color)(注意不是1200C)就可以正常。</p>
<h3 id="路由器-USB"><a href="#路由器-USB" class="headerlink" title="路由器 + USB"></a>路由器 + USB</h3><p>USB打印机 (<a href="https://openwrt.org/docs/guide-user/services/print_server/p910ndprinterserver">https://openwrt.org/docs/guide-user/services/print_server/p910ndprinterserver</a>)</p>
<p>如果路由器有USB接口，可以连接打印机并通过路由器共享。</p>
<p>在openwrt下安装如下几个包，就可以增加共享打印机。<br>kmod-usb-printer<br>p910nd<br>luci-app-p910nd<br>luci-i18n-p910nd-zh-cn</p>
<p>安装之后会增加菜单“网络存储-&gt;打印服务器”<br><img src="/myimages/hp_printer_1212_openwrt1.png" alt="打印服务器"></p>
<p>在Padavan下如果固件支持，可以在如下菜单中打开“启用 TCP&#x2F;IP 原始端口”为“是(bidirectional)”<br><img src="/myimages/hp_printer_1212_padavan1.png" alt="启用 TCP&#x2F;IP 原始端口"></p>
<p>用这种方式通过路由器共享出来的打印机只能做到把USB口打印机变成网络接口打印机。客户端还是需要安装对应的打印机驱动程序才能使用。</p>
<p>在CUPS中，用如下命令安装打印机驱动</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install hplip</span><br></pre></td></tr></table></figure>

<p>如果出现问题，可以尝试</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install hplip  --fix-missing</span><br></pre></td></tr></table></figure>

<p>然后打开CUPS web控制台。</p>
<p><img src="/myimages/hp_printer_1212_cups1.png" alt="cups Administration"><br>点击”Add Printer”按钮</p>
<p><img src="/myimages/hp_printer_1212_cups2.png" alt="cups Administration"><br>选择AppSocket&#x2F;HP JetDirect 并按Continue</p>
<p><img src="/myimages/hp_printer_1212_cups3.png" alt="cups Administration"><br>Connection添“socket:&#x2F;&#x2F;192.168.1.101:9100”并按Continue<br>192.168.1.101是openwrt路由器IP地址，9100是在openwrt“打印服务器”中设置的“监听端口”</p>
<p><img src="/myimages/hp_printer_1212_cups4.png" alt="cups Administration"><br>填写相关信息，并确定选中“Sharing: 	Share This Printer”按“Continue”</p>
<p><img src="/myimages/hp_printer_1212_cups5.png" alt="cups Administration"><br>选HP并继续</p>
<p><img src="/myimages/hp_printer_1212_cups6.png" alt="cups Administration"><br>选HP Deskjet 1200 Series, hpcups 3.21.2(en)并按“Add Printer”</p>
<p><img src="/myimages/hp_printer_1212_cups7.png" alt="cups Administration"><br>按“Set Default Options”</p>
<p><img src="/myimages/hp_printer_1212_cups8.png" alt="cups Administration"><br>添加成功，最终跳到这个界面</p>
<h3 id="手机连接CUPS打印机"><a href="#手机连接CUPS打印机" class="headerlink" title="手机连接CUPS打印机"></a>手机连接CUPS打印机</h3><p>手机可以自动列出同局域网的CUPS打印机。如果没有，尝试安装如下包，重启cups</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install avahi-daemon avahi-utils</span><br><span class="line">sudo systemctl stop cups</span><br><span class="line">sudo systemctl start cups</span><br></pre></td></tr></table></figure>
</div></article><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2022/09/08/linux-mount-smb/"><i class="fa fa-chevron-left">  </i><span>Linux(Armbian) mount SMB on boot</span></a></div><div class="next-post pull-right"><a href="/2022/05/26/heroku-hexo/"><span>用 Hexo和Heroku搭建个人博客分别部署到github.io, heroku和VPS自建Caddy服务器上</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2025 By Ray Qu</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>